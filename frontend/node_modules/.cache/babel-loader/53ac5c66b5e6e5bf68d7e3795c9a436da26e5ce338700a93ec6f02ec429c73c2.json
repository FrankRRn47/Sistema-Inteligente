{"ast":null,"code":"import{API_BASE_URL}from'../services/api.js';import useSnapshotPreview from'../hooks/useSnapshotPreview.js';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function MediaResultCard(_ref){var _item$emotion_counts,_item$detections,_item$media_type;let{item}=_ref;const baseUrl=API_BASE_URL.replace(/\\/$/,'');const buildUrl=path=>{if(!path)return null;if(path.startsWith('http'))return path;return\"\".concat(baseUrl).concat(path);};const snapshotHref=buildUrl(item.snapshot_url);const originalHref=buildUrl(item.original_url);const counts=(_item$emotion_counts=item.emotion_counts)!==null&&_item$emotion_counts!==void 0&&_item$emotion_counts.length?item.emotion_counts.map(_ref2=>{let{emotion_label:label,count:qty}=_ref2;return[label,qty];}):Object.entries(((_item$detections=item.detections)===null||_item$detections===void 0?void 0:_item$detections.counts)||{});const{previewUrl,fallbackUrl,state:previewState}=useSnapshotPreview(item.snapshot_url);const previewLink=previewUrl||fallbackUrl;const showPreview=Boolean(item.snapshot_url)&&(previewState==='loading'||previewState==='ready');return/*#__PURE__*/_jsxs(\"div\",{className:\"card media-result-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"media-result-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"media-pill\",children:[(_item$media_type=item.media_type)===null||_item$media_type===void 0?void 0:_item$media_type.toUpperCase(),\" \\xB7 \",item.source_type]}),/*#__PURE__*/_jsx(\"h3\",{children:item.dominant_emotion}),/*#__PURE__*/_jsxs(\"p\",{className:\"media-confidence\",children:[\"Confianza \",(item.confidence*100).toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-links\",children:[previewLink&&/*#__PURE__*/_jsx(\"a\",{href:previewLink,target:\"_blank\",rel:\"noreferrer\",children:\"Ver captura\"}),originalHref&&/*#__PURE__*/_jsx(\"a\",{href:originalHref,target:\"_blank\",rel:\"noreferrer\",children:\"Archivo original\"})]})]}),showPreview&&/*#__PURE__*/_jsx(\"figure\",{className:\"media-result-preview \".concat(previewState==='loading'?'is-loading':''),children:previewState==='ready'&&previewUrl?/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Captura del rostro clasificado como \".concat(item.dominant_emotion),loading:\"lazy\"}):/*#__PURE__*/_jsx(\"div\",{className:\"media-preview-skeleton\",children:\"Renderizando captura\\u2026\"})}),counts.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"media-counts\",children:counts.map(_ref3=>{let[label,qty]=_ref3;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:label}),/*#__PURE__*/_jsx(\"strong\",{children:qty})]},label);})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"media-result-footer\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.created_at?new Date(item.created_at).toLocaleString():'N/D'}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Canal: \",item.channel]})]})]});}export default MediaResultCard;","map":{"version":3,"names":["API_BASE_URL","useSnapshotPreview","jsxs","_jsxs","jsx","_jsx","MediaResultCard","_ref","_item$emotion_counts","_item$detections","_item$media_type","item","baseUrl","replace","buildUrl","path","startsWith","concat","snapshotHref","snapshot_url","originalHref","original_url","counts","emotion_counts","length","map","_ref2","emotion_label","label","count","qty","Object","entries","detections","previewUrl","fallbackUrl","state","previewState","previewLink","showPreview","Boolean","className","children","media_type","toUpperCase","source_type","dominant_emotion","confidence","toFixed","href","target","rel","src","alt","loading","_ref3","created_at","Date","toLocaleString","channel"],"sources":["C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/src/components/MediaResultCard.jsx"],"sourcesContent":["import { API_BASE_URL } from '../services/api.js';\r\nimport useSnapshotPreview from '../hooks/useSnapshotPreview.js';\r\n\r\nfunction MediaResultCard({ item }) {\r\n  const baseUrl = API_BASE_URL.replace(/\\/$/, '');\r\n  const buildUrl = (path) => {\r\n    if (!path) return null;\r\n    if (path.startsWith('http')) return path;\r\n    return `${baseUrl}${path}`;\r\n  };\r\n\r\n  const snapshotHref = buildUrl(item.snapshot_url);\r\n  const originalHref = buildUrl(item.original_url);\r\n  const counts = item.emotion_counts?.length\r\n    ? item.emotion_counts.map(({ emotion_label: label, count: qty }) => [label, qty])\r\n    : Object.entries(item.detections?.counts || {});\r\n  const { previewUrl, fallbackUrl, state: previewState } = useSnapshotPreview(item.snapshot_url);\r\n  const previewLink = previewUrl || fallbackUrl;\r\n  const showPreview = Boolean(item.snapshot_url) && (previewState === 'loading' || previewState === 'ready');\r\n\r\n  return (\r\n    <div className=\"card media-result-card\">\r\n      <header className=\"media-result-header\">\r\n        <div>\r\n          <p className=\"media-pill\">{item.media_type?.toUpperCase()} · {item.source_type}</p>\r\n          <h3>{item.dominant_emotion}</h3>\r\n          <p className=\"media-confidence\">Confianza {(item.confidence * 100).toFixed(2)}%</p>\r\n        </div>\r\n        <div className=\"media-links\">\r\n          {previewLink && (\r\n            <a href={previewLink} target=\"_blank\" rel=\"noreferrer\">\r\n              Ver captura\r\n            </a>\r\n          )}\r\n          {originalHref && (\r\n            <a href={originalHref} target=\"_blank\" rel=\"noreferrer\">\r\n              Archivo original\r\n            </a>\r\n          )}\r\n        </div>\r\n      </header>\r\n      {showPreview && (\r\n        <figure className={`media-result-preview ${previewState === 'loading' ? 'is-loading' : ''}`}>\r\n          {previewState === 'ready' && previewUrl ? (\r\n            <img src={previewUrl} alt={`Captura del rostro clasificado como ${item.dominant_emotion}`} loading=\"lazy\" />\r\n          ) : (\r\n            <div className=\"media-preview-skeleton\">Renderizando captura…</div>\r\n          )}\r\n        </figure>\r\n      )}\r\n      {counts.length > 0 && (\r\n        <ul className=\"media-counts\">\r\n          {counts.map(([label, qty]) => (\r\n            <li key={label}>\r\n              <span>{label}</span>\r\n              <strong>{qty}</strong>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      <footer className=\"media-result-footer\">\r\n        <span>{item.created_at ? new Date(item.created_at).toLocaleString() : 'N/D'}</span>\r\n        <span>Canal: {item.channel}</span>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MediaResultCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}