{"ast":null,"code":"import _objectSpread from\"C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import api,{API_BASE_URL}from'./api.js';function normalizeFileEndpoint(pathOrUrl){if(!pathOrUrl){return null;}const withoutBase=pathOrUrl.startsWith('http')?pathOrUrl.replace(API_BASE_URL,''):pathOrUrl;if(withoutBase.startsWith('/media/files')){return withoutBase;}const sanitized=withoutBase.replace(/^\\/+/,'');return\"/media/files/\".concat(sanitized);}function normalizeAnalysesPayload(){let data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const analyses=Array.isArray(data.analyses)?data.analyses:data.analysis?[data.analysis]:[];const normalized=_objectSpread(_objectSpread({},data),{},{analyses});if(!normalized.analysis&&analyses.length>0){normalized.analysis=analyses[0];}return normalized;}function sendMultipart(endpoint,file){let channel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'manual';let extraFields=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};const formData=new FormData();formData.append('file',file);formData.append('channel',channel);Object.entries(extraFields).forEach(_ref=>{let[key,value]=_ref;if(value!==undefined&&value!==null&&value!==''){formData.append(key,value);}});return api.post(endpoint,formData,{headers:{'Content-Type':'multipart/form-data'}});}export async function analyzeImageUpload(file){let channel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'manual';const{data}=await sendMultipart('/analyze-imagen',file,channel);return normalizeAnalysesPayload(data);}export async function analyzeVideoUpload(file){let channel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'manual';const{data}=await sendMultipart('/analyze-video',file,channel);return normalizeAnalysesPayload(data);}export async function analyzeWebcamUpload(file){let channel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'webcam';const{data}=await sendMultipart('/analyze-webcam',file,channel);return normalizeAnalysesPayload(data);}export async function analyzeWebcamFrame(file){let channel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'webcam-live';let sessionId=arguments.length>2?arguments[2]:undefined;const extraFields=sessionId?{session_id:sessionId}:{};const{data}=await sendMultipart('/analyze-webcam-frame',file,channel,extraFields);return data;}export async function startLiveSession(){let channel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'webcam-live';const{data}=await api.post('/media/live-session/start',{channel});return data;}export async function stopLiveSession(sessionId){const{data}=await api.post('/media/live-session/stop',{session_id:sessionId});return normalizeAnalysesPayload(data);}export async function fetchModelMetadata(){const{data}=await api.get('/media/model-metadata');return data;}export async function fetchMediaHistory(){let{limit=12,mediaType,sourceType,emotion}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const params={limit};if(mediaType&&mediaType!=='all'){params.media_type=mediaType;}if(sourceType&&sourceType!=='all'){params.source_type=sourceType;}if(emotion&&emotion!=='all'){params.emotion=emotion;}const{data}=await api.get('/media/records',{params});return data;}export async function fetchMediaSnapshot(pathOrUrl){const endpoint=normalizeFileEndpoint(pathOrUrl);if(!endpoint){return null;}const response=await api.get(endpoint,{responseType:'blob'});return response.data;}","map":{"version":3,"names":["api","API_BASE_URL","normalizeFileEndpoint","pathOrUrl","withoutBase","startsWith","replace","sanitized","concat","normalizeAnalysesPayload","data","arguments","length","undefined","analyses","Array","isArray","analysis","normalized","_objectSpread","sendMultipart","endpoint","file","channel","extraFields","formData","FormData","append","Object","entries","forEach","_ref","key","value","post","headers","analyzeImageUpload","analyzeVideoUpload","analyzeWebcamUpload","analyzeWebcamFrame","sessionId","session_id","startLiveSession","stopLiveSession","fetchModelMetadata","get","fetchMediaHistory","limit","mediaType","sourceType","emotion","params","media_type","source_type","fetchMediaSnapshot","response","responseType"],"sources":["C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/src/services/mediaService.js"],"sourcesContent":["import api, { API_BASE_URL } from './api.js';\r\n\r\nfunction normalizeFileEndpoint(pathOrUrl) {\r\n  if (!pathOrUrl) {\r\n    return null;\r\n  }\r\n  const withoutBase = pathOrUrl.startsWith('http')\r\n    ? pathOrUrl.replace(API_BASE_URL, '')\r\n    : pathOrUrl;\r\n  if (withoutBase.startsWith('/media/files')) {\r\n    return withoutBase;\r\n  }\r\n  const sanitized = withoutBase.replace(/^\\/+/, '');\r\n  return `/media/files/${sanitized}`;\r\n}\r\n\r\nfunction normalizeAnalysesPayload(data = {}) {\r\n  const analyses = Array.isArray(data.analyses)\r\n    ? data.analyses\r\n    : data.analysis\r\n    ? [data.analysis]\r\n    : [];\r\n  const normalized = { ...data, analyses };\r\n  if (!normalized.analysis && analyses.length > 0) {\r\n    normalized.analysis = analyses[0];\r\n  }\r\n  return normalized;\r\n}\r\n\r\nfunction sendMultipart(endpoint, file, channel = 'manual', extraFields = {}) {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('channel', channel);\r\n  Object.entries(extraFields).forEach(([key, value]) => {\r\n    if (value !== undefined && value !== null && value !== '') {\r\n      formData.append(key, value);\r\n    }\r\n  });\r\n  return api.post(endpoint, formData, {\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n  });\r\n}\r\n\r\nexport async function analyzeImageUpload(file, channel = 'manual') {\r\n  const { data } = await sendMultipart('/analyze-imagen', file, channel);\r\n  return normalizeAnalysesPayload(data);\r\n}\r\n\r\nexport async function analyzeVideoUpload(file, channel = 'manual') {\r\n  const { data } = await sendMultipart('/analyze-video', file, channel);\r\n  return normalizeAnalysesPayload(data);\r\n}\r\n\r\nexport async function analyzeWebcamUpload(file, channel = 'webcam') {\r\n  const { data } = await sendMultipart('/analyze-webcam', file, channel);\r\n  return normalizeAnalysesPayload(data);\r\n}\r\n\r\nexport async function analyzeWebcamFrame(file, channel = 'webcam-live', sessionId) {\r\n  const extraFields = sessionId ? { session_id: sessionId } : {};\r\n  const { data } = await sendMultipart('/analyze-webcam-frame', file, channel, extraFields);\r\n  return data;\r\n}\r\n\r\nexport async function startLiveSession(channel = 'webcam-live') {\r\n  const { data } = await api.post('/media/live-session/start', { channel });\r\n  return data;\r\n}\r\n\r\nexport async function stopLiveSession(sessionId) {\r\n  const { data } = await api.post('/media/live-session/stop', { session_id: sessionId });\r\n  return normalizeAnalysesPayload(data);\r\n}\r\n\r\nexport async function fetchModelMetadata() {\r\n  const { data } = await api.get('/media/model-metadata');\r\n  return data;\r\n}\r\n\r\nexport async function fetchMediaHistory({ limit = 12, mediaType, sourceType, emotion } = {}) {\r\n  const params = { limit };\r\n  if (mediaType && mediaType !== 'all') {\r\n    params.media_type = mediaType;\r\n  }\r\n  if (sourceType && sourceType !== 'all') {\r\n    params.source_type = sourceType;\r\n  }\r\n  if (emotion && emotion !== 'all') {\r\n    params.emotion = emotion;\r\n  }\r\n  const { data } = await api.get('/media/records', { params });\r\n  return data;\r\n}\r\n\r\nexport async function fetchMediaSnapshot(pathOrUrl) {\r\n  const endpoint = normalizeFileEndpoint(pathOrUrl);\r\n  if (!endpoint) {\r\n    return null;\r\n  }\r\n  const response = await api.get(endpoint, { responseType: 'blob' });\r\n  return response.data;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}