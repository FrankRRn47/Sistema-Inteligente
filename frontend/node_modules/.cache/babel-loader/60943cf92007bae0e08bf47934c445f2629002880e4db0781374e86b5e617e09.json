{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Loq\\\\Desktop\\\\gatoportafolio\\\\EmocionesDos - versioncuatro\\\\SIMPAC-2023-299\\\\frontend\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useMemo, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(null);\nconst TOKEN_KEY = 'ia_dashboard_token';\nconst USER_KEY = 'ia_dashboard_user';\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [token, setToken] = useState(() => localStorage.getItem(TOKEN_KEY));\n  const [user, setUser] = useState(() => {\n    const stored = localStorage.getItem(USER_KEY);\n    return stored ? JSON.parse(stored) : null;\n  });\n  useEffect(() => {\n    if (token) {\n      localStorage.setItem(TOKEN_KEY, token);\n    } else {\n      localStorage.removeItem(TOKEN_KEY);\n    }\n  }, [token]);\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem(USER_KEY, JSON.stringify(user));\n    } else {\n      localStorage.removeItem(USER_KEY);\n    }\n  }, [user]);\n  const value = useMemo(() => ({\n    token,\n    user,\n    isAuthenticated: Boolean(token),\n    login: (nextToken, nextUser) => {\n      setToken(nextToken);\n      setUser(nextUser);\n    },\n    logout: () => {\n      setToken(null);\n      setUser(null);\n    },\n    updateUser: partial => setUser(prev => prev ? {\n      ...prev,\n      ...partial\n    } : prev)\n  }), [token, user]);\n  useEffect(() => {\n    const handler = () => {\n      setToken(null);\n      setUser(null);\n    };\n    window.addEventListener('auth:unauthorized', handler);\n    return () => window.removeEventListener('auth:unauthorized', handler);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this);\n}\n_s(AuthProvider, \"af715F05DVolGWAL7tKkxyFaNAM=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useEffect","useMemo","useState","jsxDEV","_jsxDEV","AuthContext","TOKEN_KEY","USER_KEY","AuthProvider","children","_s","token","setToken","localStorage","getItem","user","setUser","stored","JSON","parse","setItem","removeItem","stringify","value","isAuthenticated","Boolean","login","nextToken","nextUser","logout","updateUser","partial","prev","handler","window","addEventListener","removeEventListener","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatro/SIMPAC-2023-299/frontend/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useEffect, useMemo, useState } from 'react';\r\n\r\nexport const AuthContext = createContext(null);\r\n\r\nconst TOKEN_KEY = 'ia_dashboard_token';\r\nconst USER_KEY = 'ia_dashboard_user';\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [token, setToken] = useState(() => localStorage.getItem(TOKEN_KEY));\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem(USER_KEY);\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      localStorage.setItem(TOKEN_KEY, token);\r\n    } else {\r\n      localStorage.removeItem(TOKEN_KEY);\r\n    }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      localStorage.setItem(USER_KEY, JSON.stringify(user));\r\n    } else {\r\n      localStorage.removeItem(USER_KEY);\r\n    }\r\n  }, [user]);\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      token,\r\n      user,\r\n      isAuthenticated: Boolean(token),\r\n      login: (nextToken, nextUser) => {\r\n        setToken(nextToken);\r\n        setUser(nextUser);\r\n      },\r\n      logout: () => {\r\n        setToken(null);\r\n        setUser(null);\r\n      },\r\n      updateUser: (partial) => setUser((prev) => (prev ? { ...prev, ...partial } : prev)),\r\n    }),\r\n    [token, user]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handler = () => {\r\n      setToken(null);\r\n      setUser(null);\r\n    };\r\n    window.addEventListener('auth:unauthorized', handler);\r\n    return () => window.removeEventListener('auth:unauthorized', handler);\r\n  }, []);\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpE,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,IAAI,CAAC;AAE9C,MAAMO,SAAS,GAAG,oBAAoB;AACtC,MAAMC,QAAQ,GAAG,mBAAmB;AAEpC,OAAO,SAASC,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,MAAMW,YAAY,CAACC,OAAO,CAACR,SAAS,CAAC,CAAC;EACzE,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,MAAM;IACrC,MAAMe,MAAM,GAAGJ,YAAY,CAACC,OAAO,CAACP,QAAQ,CAAC;IAC7C,OAAOU,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACF,MAAM,CAAC,GAAG,IAAI;EAC3C,CAAC,CAAC;EAEFjB,SAAS,CAAC,MAAM;IACd,IAAIW,KAAK,EAAE;MACTE,YAAY,CAACO,OAAO,CAACd,SAAS,EAAEK,KAAK,CAAC;IACxC,CAAC,MAAM;MACLE,YAAY,CAACQ,UAAU,CAACf,SAAS,CAAC;IACpC;EACF,CAAC,EAAE,CAACK,KAAK,CAAC,CAAC;EAEXX,SAAS,CAAC,MAAM;IACd,IAAIe,IAAI,EAAE;MACRF,YAAY,CAACO,OAAO,CAACb,QAAQ,EAAEW,IAAI,CAACI,SAAS,CAACP,IAAI,CAAC,CAAC;IACtD,CAAC,MAAM;MACLF,YAAY,CAACQ,UAAU,CAACd,QAAQ,CAAC;IACnC;EACF,CAAC,EAAE,CAACQ,IAAI,CAAC,CAAC;EAEV,MAAMQ,KAAK,GAAGtB,OAAO,CACnB,OAAO;IACLU,KAAK;IACLI,IAAI;IACJS,eAAe,EAAEC,OAAO,CAACd,KAAK,CAAC;IAC/Be,KAAK,EAAEA,CAACC,SAAS,EAAEC,QAAQ,KAAK;MAC9BhB,QAAQ,CAACe,SAAS,CAAC;MACnBX,OAAO,CAACY,QAAQ,CAAC;IACnB,CAAC;IACDC,MAAM,EAAEA,CAAA,KAAM;MACZjB,QAAQ,CAAC,IAAI,CAAC;MACdI,OAAO,CAAC,IAAI,CAAC;IACf,CAAC;IACDc,UAAU,EAAGC,OAAO,IAAKf,OAAO,CAAEgB,IAAI,IAAMA,IAAI,GAAG;MAAE,GAAGA,IAAI;MAAE,GAAGD;IAAQ,CAAC,GAAGC,IAAK;EACpF,CAAC,CAAC,EACF,CAACrB,KAAK,EAAEI,IAAI,CACd,CAAC;EAEDf,SAAS,CAAC,MAAM;IACd,MAAMiC,OAAO,GAAGA,CAAA,KAAM;MACpBrB,QAAQ,CAAC,IAAI,CAAC;MACdI,OAAO,CAAC,IAAI,CAAC;IACf,CAAC;IACDkB,MAAM,CAACC,gBAAgB,CAAC,mBAAmB,EAAEF,OAAO,CAAC;IACrD,OAAO,MAAMC,MAAM,CAACE,mBAAmB,CAAC,mBAAmB,EAAEH,OAAO,CAAC;EACvE,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAO7B,OAAA,CAACC,WAAW,CAACgC,QAAQ;IAACd,KAAK,EAAEA,KAAM;IAAAd,QAAA,EAAEA;EAAQ;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E;AAAC/B,EAAA,CAnDeF,YAAY;AAAAkC,EAAA,GAAZlC,YAAY;AAAA,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}