{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Loq\\\\Desktop\\\\Evaluciona Final\\\\Beta01\\\\SIMPACBETA\\\\frontend\\\\src\\\\components\\\\MediaResultCard.jsx\",\n  _s = $RefreshSig$();\nimport { API_BASE_URL } from '../services/api.js';\nimport useSnapshotPreview from '../hooks/useSnapshotPreview.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MediaResultCard({\n  item\n}) {\n  _s();\n  var _item$emotion_counts, _item$detections, _item$media_type;\n  const baseUrl = API_BASE_URL.replace(/\\/$/, '');\n  const buildUrl = path => {\n    if (!path) return null;\n    if (path.startsWith('http')) return path;\n    return `${baseUrl}${path}`;\n  };\n  const snapshotHref = buildUrl(item.snapshot_url);\n  const originalHref = buildUrl(item.original_url);\n  const counts = (_item$emotion_counts = item.emotion_counts) !== null && _item$emotion_counts !== void 0 && _item$emotion_counts.length ? item.emotion_counts.map(({\n    emotion_label: label,\n    count: qty\n  }) => [label, qty]) : Object.entries(((_item$detections = item.detections) === null || _item$detections === void 0 ? void 0 : _item$detections.counts) || {});\n  const {\n    previewUrl,\n    fallbackUrl,\n    state: previewState\n  } = useSnapshotPreview(item.snapshot_url);\n  const previewLink = previewUrl || fallbackUrl;\n  const showPreview = Boolean(item.snapshot_url) && (previewState === 'loading' || previewState === 'ready');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card media-result-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"media-result-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"media-pill\",\n          children: [(_item$media_type = item.media_type) === null || _item$media_type === void 0 ? void 0 : _item$media_type.toUpperCase(), \" \\xB7 \", item.source_type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.dominant_emotion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"media-confidence\",\n          children: [\"Confianza \", (item.confidence * 100).toFixed(2), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"media-links\",\n        children: [previewLink && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: previewLink,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"Ver captura\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 13\n        }, this), originalHref && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: originalHref,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"Archivo original\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), showPreview && /*#__PURE__*/_jsxDEV(\"figure\", {\n      className: `media-result-preview ${previewState === 'loading' ? 'is-loading' : ''}`,\n      children: previewState === 'ready' && previewUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: previewUrl,\n        alt: `Captura del rostro clasificado como ${item.dominant_emotion}`,\n        loading: \"lazy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"media-preview-skeleton\",\n        children: \"Renderizando captura\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), counts.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"media-counts\",\n      children: counts.map(([label, qty]) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: qty\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this)]\n      }, label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"media-result-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: item.created_at ? new Date(item.created_at).toLocaleString() : 'N/D'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Canal: \", item.channel]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n_s(MediaResultCard, \"h5T5zMLcl8QtYG5bnWE1vC42v4U=\", false, function () {\n  return [useSnapshotPreview];\n});\n_c = MediaResultCard;\nexport default MediaResultCard;\nvar _c;\n$RefreshReg$(_c, \"MediaResultCard\");","map":{"version":3,"names":["API_BASE_URL","useSnapshotPreview","jsxDEV","_jsxDEV","MediaResultCard","item","_s","_item$emotion_counts","_item$detections","_item$media_type","baseUrl","replace","buildUrl","path","startsWith","snapshotHref","snapshot_url","originalHref","original_url","counts","emotion_counts","length","map","emotion_label","label","count","qty","Object","entries","detections","previewUrl","fallbackUrl","state","previewState","previewLink","showPreview","Boolean","className","children","media_type","toUpperCase","source_type","fileName","_jsxFileName","lineNumber","columnNumber","dominant_emotion","confidence","toFixed","href","target","rel","src","alt","loading","created_at","Date","toLocaleString","channel","_c","$RefreshReg$"],"sources":["C:/Users/Loq/Desktop/Evaluciona Final/Beta01/SIMPACBETA/frontend/src/components/MediaResultCard.jsx"],"sourcesContent":["import { API_BASE_URL } from '../services/api.js';\r\nimport useSnapshotPreview from '../hooks/useSnapshotPreview.js';\r\n\r\nfunction MediaResultCard({ item }) {\r\n  const baseUrl = API_BASE_URL.replace(/\\/$/, '');\r\n  const buildUrl = (path) => {\r\n    if (!path) return null;\r\n    if (path.startsWith('http')) return path;\r\n    return `${baseUrl}${path}`;\r\n  };\r\n\r\n  const snapshotHref = buildUrl(item.snapshot_url);\r\n  const originalHref = buildUrl(item.original_url);\r\n  const counts = item.emotion_counts?.length\r\n    ? item.emotion_counts.map(({ emotion_label: label, count: qty }) => [label, qty])\r\n    : Object.entries(item.detections?.counts || {});\r\n  const { previewUrl, fallbackUrl, state: previewState } = useSnapshotPreview(item.snapshot_url);\r\n  const previewLink = previewUrl || fallbackUrl;\r\n  const showPreview = Boolean(item.snapshot_url) && (previewState === 'loading' || previewState === 'ready');\r\n\r\n  return (\r\n    <div className=\"card media-result-card\">\r\n      <header className=\"media-result-header\">\r\n        <div>\r\n          <p className=\"media-pill\">{item.media_type?.toUpperCase()} · {item.source_type}</p>\r\n          <h3>{item.dominant_emotion}</h3>\r\n          <p className=\"media-confidence\">Confianza {(item.confidence * 100).toFixed(2)}%</p>\r\n        </div>\r\n        <div className=\"media-links\">\r\n          {previewLink && (\r\n            <a href={previewLink} target=\"_blank\" rel=\"noreferrer\">\r\n              Ver captura\r\n            </a>\r\n          )}\r\n          {originalHref && (\r\n            <a href={originalHref} target=\"_blank\" rel=\"noreferrer\">\r\n              Archivo original\r\n            </a>\r\n          )}\r\n        </div>\r\n      </header>\r\n      {showPreview && (\r\n        <figure className={`media-result-preview ${previewState === 'loading' ? 'is-loading' : ''}`}>\r\n          {previewState === 'ready' && previewUrl ? (\r\n            <img src={previewUrl} alt={`Captura del rostro clasificado como ${item.dominant_emotion}`} loading=\"lazy\" />\r\n          ) : (\r\n            <div className=\"media-preview-skeleton\">Renderizando captura…</div>\r\n          )}\r\n        </figure>\r\n      )}\r\n      {counts.length > 0 && (\r\n        <ul className=\"media-counts\">\r\n          {counts.map(([label, qty]) => (\r\n            <li key={label}>\r\n              <span>{label}</span>\r\n              <strong>{qty}</strong>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      <footer className=\"media-result-footer\">\r\n        <span>{item.created_at ? new Date(item.created_at).toLocaleString() : 'N/D'}</span>\r\n        <span>Canal: {item.channel}</span>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MediaResultCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}