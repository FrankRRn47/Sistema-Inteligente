{"ast":null,"code":"import{useEffect,useState}from'react';import ResultCard from'../components/ResultCard.jsx';import{analyzeText}from'../services/analysisService.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HISTORY_KEY='ia_analysis_history';function TextAnalyzer(){const[text,setText]=useState('');const[channel,setChannel]=useState('manual');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[result,setResult]=useState(null);const[history,setHistory]=useState([]);useEffect(()=>{const stored=localStorage.getItem(HISTORY_KEY);if(stored){setHistory(JSON.parse(stored));}},[]);const handleSubmit=async event=>{event.preventDefault();if(!text.trim())return;setLoading(true);setError('');try{const response=await analyzeText(text,channel);setResult(response.analysis);const updated=[response.analysis,...history].slice(0,10);setHistory(updated);localStorage.setItem(HISTORY_KEY,JSON.stringify(updated));setText('');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'No se pudo analizar el texto.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Analizar texto\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:'flex',flexDirection:'column',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",children:\"Texto\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"text\",rows:\"6\",value:text,onChange:e=>setText(e.target.value),placeholder:\"Escribe o pega el texto a analizar\",required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'crimson'},children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-btn\",type:\"submit\",disabled:loading,children:loading?'Analizando...':'Enviar'})]})]}),result&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Resultado reciente\"}),/*#__PURE__*/_jsx(ResultCard,{result:result})]}),history.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Historial local\"}),/*#__PURE__*/_jsx(\"div\",{className:\"result-history\",children:history.map(item=>/*#__PURE__*/_jsx(ResultCard,{result:item},item.id+item.created_at))})]})]});}export default TextAnalyzer;","map":{"version":3,"names":["useEffect","useState","ResultCard","analyzeText","jsx","_jsx","jsxs","_jsxs","HISTORY_KEY","TextAnalyzer","text","setText","channel","setChannel","loading","setLoading","error","setError","result","setResult","history","setHistory","stored","localStorage","getItem","JSON","parse","handleSubmit","event","preventDefault","trim","response","analysis","updated","slice","setItem","stringify","err","_err$response","_err$response$data","data","message","className","children","onSubmit","style","display","flexDirection","gap","htmlFor","id","rows","value","onChange","e","target","placeholder","required","color","type","disabled","marginTop","length","map","item","created_at"],"sources":["C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/src/pages/TextAnalyzer.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\nimport ResultCard from '../components/ResultCard.jsx';\r\nimport { analyzeText } from '../services/analysisService.js';\r\n\r\nconst HISTORY_KEY = 'ia_analysis_history';\r\n\r\nfunction TextAnalyzer() {\r\n  const [text, setText] = useState('');\r\n  const [channel, setChannel] = useState('manual');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [result, setResult] = useState(null);\r\n  const [history, setHistory] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(HISTORY_KEY);\r\n    if (stored) {\r\n      setHistory(JSON.parse(stored));\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!text.trim()) return;\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await analyzeText(text, channel);\r\n      setResult(response.analysis);\r\n      const updated = [response.analysis, ...history].slice(0, 10);\r\n      setHistory(updated);\r\n      localStorage.setItem(HISTORY_KEY, JSON.stringify(updated));\r\n      setText('');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'No se pudo analizar el texto.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"app-container\">\r\n      <div className=\"card\">\r\n        <h1 className=\"page-title\">Analizar texto</h1>\r\n        <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n          <div className=\"form-group\">\r\n            {/* Selector de canal eliminado */}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"text\">Texto</label>\r\n            <textarea id=\"text\" rows=\"6\" value={text} onChange={(e) => setText(e.target.value)} placeholder=\"Escribe o pega el texto a analizar\" required />\r\n          </div>\r\n          {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n          <button className=\"primary-btn\" type=\"submit\" disabled={loading}>\r\n            {loading ? 'Analizando...' : 'Enviar'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {result && (\r\n        <div style={{ marginTop: '2rem' }}>\r\n          <h2>Resultado reciente</h2>\r\n          <ResultCard result={result} />\r\n        </div>\r\n      )}\r\n\r\n      {history.length > 0 && (\r\n        <div style={{ marginTop: '2rem' }}>\r\n          <h2>Historial local</h2>\r\n          <div className=\"result-history\">\r\n            {history.map((item) => (\r\n              <ResultCard key={item.id + item.created_at} result={item} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default TextAnalyzer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}