{"ast":null,"code":"import _objectSpread from\"C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useEffect,useMemo,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext(null);const TOKEN_KEY='ia_dashboard_token';const USER_KEY='ia_dashboard_user';export function AuthProvider(_ref){let{children}=_ref;const[token,setToken]=useState(()=>localStorage.getItem(TOKEN_KEY));const[user,setUser]=useState(()=>{const stored=localStorage.getItem(USER_KEY);return stored?JSON.parse(stored):null;});useEffect(()=>{if(token){localStorage.setItem(TOKEN_KEY,token);}else{localStorage.removeItem(TOKEN_KEY);}},[token]);useEffect(()=>{if(user){localStorage.setItem(USER_KEY,JSON.stringify(user));}else{localStorage.removeItem(USER_KEY);}},[user]);const value=useMemo(()=>({token,user,isAuthenticated:Boolean(token),login:(nextToken,nextUser)=>{setToken(nextToken);setUser(nextUser);},logout:()=>{setToken(null);setUser(null);},updateUser:partial=>setUser(prev=>prev?_objectSpread(_objectSpread({},prev),partial):prev)}),[token,user]);useEffect(()=>{const handler=()=>{setToken(null);setUser(null);};window.addEventListener('auth:unauthorized',handler);return()=>window.removeEventListener('auth:unauthorized',handler);},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});}","map":{"version":3,"names":["createContext","useEffect","useMemo","useState","jsx","_jsx","AuthContext","TOKEN_KEY","USER_KEY","AuthProvider","_ref","children","token","setToken","localStorage","getItem","user","setUser","stored","JSON","parse","setItem","removeItem","stringify","value","isAuthenticated","Boolean","login","nextToken","nextUser","logout","updateUser","partial","prev","_objectSpread","handler","window","addEventListener","removeEventListener","Provider"],"sources":["C:/Users/Loq/Desktop/gatoportafolio/EmocionesDos - versioncuatroedit01 - 100% funcional - vedit/SIMPACeditDos/frontend/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useEffect, useMemo, useState } from 'react';\r\n\r\nexport const AuthContext = createContext(null);\r\n\r\nconst TOKEN_KEY = 'ia_dashboard_token';\r\nconst USER_KEY = 'ia_dashboard_user';\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [token, setToken] = useState(() => localStorage.getItem(TOKEN_KEY));\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem(USER_KEY);\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      localStorage.setItem(TOKEN_KEY, token);\r\n    } else {\r\n      localStorage.removeItem(TOKEN_KEY);\r\n    }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      localStorage.setItem(USER_KEY, JSON.stringify(user));\r\n    } else {\r\n      localStorage.removeItem(USER_KEY);\r\n    }\r\n  }, [user]);\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      token,\r\n      user,\r\n      isAuthenticated: Boolean(token),\r\n      login: (nextToken, nextUser) => {\r\n        setToken(nextToken);\r\n        setUser(nextUser);\r\n      },\r\n      logout: () => {\r\n        setToken(null);\r\n        setUser(null);\r\n      },\r\n      updateUser: (partial) => setUser((prev) => (prev ? { ...prev, ...partial } : prev)),\r\n    }),\r\n    [token, user]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handler = () => {\r\n      setToken(null);\r\n      setUser(null);\r\n    };\r\n    window.addEventListener('auth:unauthorized', handler);\r\n    return () => window.removeEventListener('auth:unauthorized', handler);\r\n  }, []);\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n"],"mappings":"2MAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpE,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,IAAI,CAAC,CAE9C,KAAM,CAAAO,SAAS,CAAG,oBAAoB,CACtC,KAAM,CAAAC,QAAQ,CAAG,mBAAmB,CAEpC,MAAO,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,IAAMW,YAAY,CAACC,OAAO,CAACR,SAAS,CAAC,CAAC,CACzE,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,IAAM,CACrC,KAAM,CAAAe,MAAM,CAAGJ,YAAY,CAACC,OAAO,CAACP,QAAQ,CAAC,CAC7C,MAAO,CAAAU,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACF,MAAM,CAAC,CAAG,IAAI,CAC3C,CAAC,CAAC,CAEFjB,SAAS,CAAC,IAAM,CACd,GAAIW,KAAK,CAAE,CACTE,YAAY,CAACO,OAAO,CAACd,SAAS,CAAEK,KAAK,CAAC,CACxC,CAAC,IAAM,CACLE,YAAY,CAACQ,UAAU,CAACf,SAAS,CAAC,CACpC,CACF,CAAC,CAAE,CAACK,KAAK,CAAC,CAAC,CAEXX,SAAS,CAAC,IAAM,CACd,GAAIe,IAAI,CAAE,CACRF,YAAY,CAACO,OAAO,CAACb,QAAQ,CAAEW,IAAI,CAACI,SAAS,CAACP,IAAI,CAAC,CAAC,CACtD,CAAC,IAAM,CACLF,YAAY,CAACQ,UAAU,CAACd,QAAQ,CAAC,CACnC,CACF,CAAC,CAAE,CAACQ,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAQ,KAAK,CAAGtB,OAAO,CACnB,KAAO,CACLU,KAAK,CACLI,IAAI,CACJS,eAAe,CAAEC,OAAO,CAACd,KAAK,CAAC,CAC/Be,KAAK,CAAEA,CAACC,SAAS,CAAEC,QAAQ,GAAK,CAC9BhB,QAAQ,CAACe,SAAS,CAAC,CACnBX,OAAO,CAACY,QAAQ,CAAC,CACnB,CAAC,CACDC,MAAM,CAAEA,CAAA,GAAM,CACZjB,QAAQ,CAAC,IAAI,CAAC,CACdI,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CACDc,UAAU,CAAGC,OAAO,EAAKf,OAAO,CAAEgB,IAAI,EAAMA,IAAI,CAAAC,aAAA,CAAAA,aAAA,IAAQD,IAAI,EAAKD,OAAO,EAAKC,IAAK,CACpF,CAAC,CAAC,CACF,CAACrB,KAAK,CAAEI,IAAI,CACd,CAAC,CAEDf,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkC,OAAO,CAAGA,CAAA,GAAM,CACpBtB,QAAQ,CAAC,IAAI,CAAC,CACdI,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CACDmB,MAAM,CAACC,gBAAgB,CAAC,mBAAmB,CAAEF,OAAO,CAAC,CACrD,MAAO,IAAMC,MAAM,CAACE,mBAAmB,CAAC,mBAAmB,CAAEH,OAAO,CAAC,CACvE,CAAC,CAAE,EAAE,CAAC,CAEN,mBAAO9B,IAAA,CAACC,WAAW,CAACiC,QAAQ,EAACf,KAAK,CAAEA,KAAM,CAAAb,QAAA,CAAEA,QAAQ,CAAuB,CAAC,CAC9E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}